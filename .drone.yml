---
kind: pipeline
name: mon-super-pipeline-ci

steps:
  - name: hello-world
    image: lowess/preact-cli
    commands:
      - echo 'Hello World'

  - name: create-template
    image: lowess/preact-cli
    commands:
      - preact create template ${DRONE_REPO}#${DRONE_COMMIT} test_ci

  - name: node install
    image: lowess/preact-cli
    commands:
      - cd test_ci
      - npm install

  - name: node build
    image: lowess/preact-cli
    commands:
      - cd test_ci
      - npm run build

  - name: node preview
    image: lowess/preact-cli
    commands:
      - cd test_ci
      - npm run build:preview